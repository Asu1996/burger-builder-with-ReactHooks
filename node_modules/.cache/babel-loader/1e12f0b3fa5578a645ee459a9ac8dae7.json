{"ast":null,"code":"import _objectSpread from\"/home/asutosh/Documents/myReact/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/asutosh/Documents/myReact/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/asutosh/Documents/myReact/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/asutosh/Documents/myReact/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/asutosh/Documents/myReact/burger-builder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import Aux from'../../hoc/Aux';import Burger from'../../components/Burger/Burger';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import axios from'../../axios-orders';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../../withErrorHandler/withErrorHandler';import*as actions from'../../store/actions/index';var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);var _super=_createSuper(BurgerBuilder);function BurgerBuilder(){var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={purchasing:false};_this.purchaseHandler=function(){if(_this.props.isAuthenticated){_this.setState({purchasing:true});}else{_this.props.onSetAuthRedirectPath('/checkout');_this.props.history.push('/auth');}};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){_this.props.onInitPurchase();_this.props.history.push('/checkout');};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onInitIngredients();}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);return sum>0;}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.props.ings);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;};var orderSummary=null;var burger=this.props.error?/*#__PURE__*/React.createElement(\"p\",null,\"Ingredients can't be loaded!\"):/*#__PURE__*/React.createElement(Spinner,null);if(this.props.ings){burger=/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Burger,{ingredients:this.props.ings}),/*#__PURE__*/React.createElement(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disabledInfo,purchasable:this.updatePurchaseState(this.props.ings),ordered:this.purchaseHandler,price:this.props.price,isAuth:this.props.isAuthenticated}));orderSummary=/*#__PURE__*/React.createElement(OrderSummary,{ingredients:this.props.ings,purchaseCancelled:this.purchaseCancelHandler,purchaseContnued:this.purchaseContinueHandler,price:this.props.price});}return/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler},orderSummary),burger);}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ings:state.burgerBuilder.ingredients,price:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,isAuthenticated:state.auth.token!==null};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(ingName){return dispatch(actions.addIngredient(ingName));},onIngredientRemoved:function onIngredientRemoved(ingName){return dispatch(actions.removeIngredient(ingName));},onInitIngredients:function onInitIngredients(){return dispatch(actions.initIngredients());},onInitPurchase:function onInitPurchase(){return dispatch(actions.purchaseInit());},onSetAuthRedirectPath:function onSetAuthRedirectPath(path){return dispatch(actions.setAuthRedirectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["/home/asutosh/Documents/myReact/burger-builder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","OrderSummary","axios","Spinner","withErrorHandler","actions","BurgerBuilder","state","purchasing","purchaseHandler","props","isAuthenticated","setState","onSetAuthRedirectPath","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","onInitIngredients","ingredients","sum","Object","keys","map","igKey","reduce","el","disabledInfo","ings","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","updatePurchaseState","price","mapStateToProps","burgerBuilder","totalPrice","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","purchaseInit","path","setAuthRedirectPath"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport {connect} from 'react-redux'\n\nimport Aux from '../../hoc/Aux';\nimport Burger from '../../components/Burger/Burger';\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls'\nimport Modal from '../../components/UI/Modal/Modal'\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary'\nimport axios from '../../axios-orders'\nimport Spinner from '../../components/UI/Spinner/Spinner'\nimport withErrorHandler from '../../withErrorHandler/withErrorHandler'\n\nimport * as actions from '../../store/actions/index'\n\n\n\nclass BurgerBuilder extends Component{\n    \n    state = {\n        purchasing:false,\n    }\n\n    componentDidMount() {\n        this.props.onInitIngredients();\n    }\n\n    updatePurchaseState(ingredients) {\n        const sum = Object.keys(ingredients)\n                    .map(igKey => {\n                        return ingredients[igKey]\n                    })\n                    .reduce((sum, el) => {\n                        return sum + el;\n                    }, 0);\n        return sum>0;\n    }\n    \n    purchaseHandler = () =>  {\n        if(this.props.isAuthenticated) {\n            this.setState({purchasing: true});\n        }\n        else {\n            this.props.onSetAuthRedirectPath('/checkout');\n            this.props.history.push('/auth')\n        }\n    }\n\n    purchaseCancelHandler = () => {\n        this.setState({purchasing:false});\n    }\n\n    purchaseContinueHandler = () => {\n        this.props.onInitPurchase();\n        this.props.history.push('/checkout');\n    }\n\n    render() {\n        const disabledInfo = {\n            ...this.props.ings\n        };\n        for (let key in disabledInfo) {\n            disabledInfo[key] = disabledInfo[key] <= 0;\n        };\n\n        let orderSummary = null;\n\n        let burger = this.props.error ? <p>Ingredients can't be loaded!</p> : <Spinner />;\n\n        if(this.props.ings) {\n            burger = (\n                <Aux>\n                    <Burger ingredients={this.props.ings}/>\n                        <BuildControls \n                            ingredientAdded={this.props.onIngredientAdded}\n                            ingredientRemoved={this.props.onIngredientRemoved}\n                            disabled={disabledInfo}\n                            purchasable={this.updatePurchaseState(this.props.ings)}\n                            ordered={this.purchaseHandler}\n                            price={this.props.price}\n                            isAuth={this.props.isAuthenticated}\n                        />\n                </Aux>        \n            );\n\n            orderSummary = (<OrderSummary \n                    ingredients={this.props.ings} \n                    purchaseCancelled={this.purchaseCancelHandler}\n                    purchaseContnued={this.purchaseContinueHandler}\n                    price={this.props.price}/>\n                );\n        }\n\n        return(\n            <Aux>\n                <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>\n                    {orderSummary}\n                </Modal>\n                {burger}\n            </Aux>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        ings: state.burgerBuilder.ingredients,\n        price: state.burgerBuilder.totalPrice,\n        error: state.burgerBuilder.error,\n        isAuthenticated: state.auth.token !== null \n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n        onIngredientRemoved: (ingName) => dispatch(actions.removeIngredient(ingName)),\n        onInitIngredients: () => dispatch(actions.initIngredients()),\n        onInitPurchase: () => dispatch(actions.purchaseInit()),\n        onSetAuthRedirectPath: (path) => dispatch(actions.setAuthRedirectPath(path))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));\n"]},"metadata":{},"sourceType":"module"}